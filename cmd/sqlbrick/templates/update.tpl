// {{ .FuncName }} {{ if eq .Comment "" -}}
generated by sqlbrick, update data in database.
{{ else -}}
{{ .Comment }}
{{- end }}
func (b *{{ .BrickName }}Brick){{ .FuncName }}(args *{{ .BrickName }}) (sql.Result, error) {
    {{- $conditionLen := len .Conditions -}}
    {{- if gt $conditionLen 0 }}
    conditionQuery := `{{ index .Segments 0 }} `
    {{- $segments := .Segments -}}
    {{- $segmentLen := len .Segments -}}
    {{- CacheSet "segment" 1 -}}
    {{- $removeComma := .RemoveComma -}}
    {{- $indexOfWhere := .IndexOfWhere -}}
    {{- range $k, $v := .Conditions }}
    if args.{{ $v.Expression }} {
        conditionQuery += `{{ $v.Query }}`
    }
    {{- if not $v.AppendNext }}
    {{- $segmentIndex := CacheGet "segment" -}}
    {{- $segment := index $segments $segmentIndex -}}
    {{- if and $removeComma (eq $segmentIndex $indexOfWhere) }}
    if strings.HasSuffix(conditionQuery, ",") {
        strings.TrimSuffix(conditionQuery, ",")
    }
    {{- end }}
    conditionQuery += ` {{ $segment }}`
    {{- $segmentIndex := Add $segmentIndex 1 -}}
    {{- CacheSet "segment" $segmentIndex -}}
    {{- end -}}
    {{- end }}

    stmt, err := b.db.PrepareNamed(conditionQuery)
    {{- else -}}
    stmt, err := b.db.PrepareNamed(
        `{{ index .Segments 0 }}`)
    {{- end }}
    if err != nil {
        return nil, err
    }
    return stmt.Exec(args)
}
